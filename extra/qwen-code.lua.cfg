name = "Qwen Code"
url = "https://github.com/QwenLM/qwen-code"
--npm install -g @qwen-code/qwen-code@latest
exe = "qwen"

local HOME = _isWindows and _env"USERPROFILE" or _env"HOME"
config = _pathjoin(HOME, ".qwen", "settings.json")

predefined = {
  model={
    "coder-model",  --qwen3-coder-plus-2025-09-23
    "vision-model", --qwen3-vl-plus-2025-09-23
  },
  extra={
    "",
    "--debug",
  },
}

--https://qwenlm.github.io/qwen-code-docs/en/users/configuration/settings/#command-line-arguments
return function (session, model, role, yolo, extra)
  return _pipeOut(exe, _context) {
    session and "--continue" or "", --"--chat-recording false",
    _optional("--model", model),
    yolo and "--yolo" or "",
    _quote(role),
    _optional(extra),
    --include-directories
    --tavily-api-key 
    --google-api-key
    --google-search-engine-id
    --web-search-default (dashscope, tavily, google)
    --web-search-default
    --max-session-turns
  }
end
