--https://github.blog/changelog/2025-07-17-deprecation-of-azure-endpoint-for-github-models/
apibase="https://models.inference.ai.azure.com"

apikey=win.GetEnv"GH_TOKEN" or "set GH_TOKEN env variable!"

model="gpt-5"

modelsMeta=function()
  local id = win.Uuid"922CC103-62C6-4F4E-8C99-31F4E84906D1"
  local user_session = far.InputBox(id, "Github preset", "Enter user_session cookie:", "AskAI/github.preset/user_session",
                                    nil,nil,nil,"FIB_BUTTONS")
  if not user_session then return "" end
  return ([[{
  apibase: "https://github.com/models"
  endpoint: "/available"
  headers: "x-requested-with": "XMLHttpRequest", cookie: "user_session=%s"
  filterFn: (model) -> model.task=="chat-completion" or model.task=="responses"
  modelsData: {"data", id:"original_name"}
}]]):format(user_session)
end
