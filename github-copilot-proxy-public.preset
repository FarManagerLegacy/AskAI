-- https://habr.com/ru/articles/799215/
-- https://github.com/settings/copilot/features

apibase="https://copilot-demo.publicaffairs.workers.dev/v1"

--Get token: https://copilot-demo.publicaffairs.workers.dev/token
local Common, copilot = ..., {
  client_id="Iv1.b507a08c87ecfe98" -- GitHub Copilot Plugin by GitHub
}
Common.utils.loadLua("github-copilot.preset", copilot)(Common)
apikey=copilot.apikey

--https://docs.github.com/copilot/reference/ai-models/supported-models
--https://docs.github.com/copilot/concepts/billing/copilot-requests#model-multipliers
model="gpt-5-mini"

modelsMeta=[[
filterFn: (model) ->
  if model.capabilities.type=='chat' and model.model_picker_enabled
    return true if not model.supported_endpoints
    for url in *model.supported_endpoints
      return true if url=="/chat/completions"
]]
